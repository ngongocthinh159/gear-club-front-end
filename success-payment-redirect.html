<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gearclub | Gaming gear</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="./assets/imgs/logo-only-figure-colored.png"
    />

    <!-- Sweet alert -->
    <link rel="stylesheet" href="sweetalert2.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body style="padding: 0; margin: 0">
    <main style="width: 100%; height: 100vh; height: 100svh">
      <img
        src="./assets/imgs/payment-success-background.jpg"
        alt="Background image"
        style="width: 100%; height: 100%; object-fit: cover"
        loading="lazy"
      />
    </main>

    <div
      class="text"
      style="position: fixed; left: 16px; top: 16px; color: white"
    ></div>

    <script type="module">
      import { changeInDatabase } from './assets/js/payment/success-redirect.js';

      if (window.location.search.includes('redirect_status=succeeded')) {
        document.querySelector('.text').innerHTML = `
          <h1>Thanh toán thành công, chuẩn bị chuyển hướng..</h1>
        `;

        Swal.fire(
          'Thanh toán thành công!!!',
          'Chuẩn bị chuyển hướng...',
          'success'
        );

        setTimeout(changeInDatabase, 3000);
      } else {
        document.querySelector('.text').innerHTML = `
          <h1>Thanh toán xảy ra lỗi, chuẩn bị chuyển hướng..</h1>
        `;

        Swal.fire('Đã xảy ra lỗi!', 'Chuẩn bị chuyển hướng...', 'error');

        setTimeout(() => {
          window.location.replace('/');
        }, 3000);
      }
    </script>
  </body>
</html>
